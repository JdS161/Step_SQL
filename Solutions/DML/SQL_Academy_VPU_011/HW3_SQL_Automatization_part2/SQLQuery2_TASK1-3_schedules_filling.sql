USE SQLAcademyVPU_011;
GO
--1. ??????? ?? Hardware-PC ? ?????? BV_011 ???????? ?????? ???????????, ????? ? ??????? ? 18:00, 
--  ????????????? ??????????? ??????;
--2. ??????? ?? ???????????????? ?? C++ ? ?????? BV_011 ???????? ?????? ???????????, ????? ? ??????? ? 19:40, 
--	????????????? ?????? ????;
--3. ??????? ?? C# ? ?????? PV_012 ???????? ?????? ??????? ? ??????? ?? ??? ???? ??????? ? 18:00, 
--	????????????? ?????? ?????????;

--In order to run the procedure fill following field:
				--1) First date&time 
				--2) Duration of the discipline
				--3) Location
				--4) Group
				--5) Discipline
				--6) Teacher
				--7) Topic /even if no topic required - the field HAS to be specified

--1:
USE SQLAcademyVPU_011;
GO
--EXEC sp_scheduleInsert '2022-01-31 18:00', 4, N'ON-LINE', 17, 9, 6, N''
--EXEC sp_scheduleInsert '2022-02-02 18:00', 4, N'ON-LINE', 17, 9, 6, N''
--EXEC sp_scheduleInsert '2022-02-04 18:00', 4, N'ON-LINE', 17, 9, 6, N''

--2:
USE SQLAcademyVPU_011;
GO
--EXEC sp_scheduleInsert '2022-01-31 19:40', 4, N'ON-LINE', 17, 3, 1, N''
--EXEC sp_scheduleInsert '2022-02-02 19:40', 4, N'ON-LINE', 17, 3, 1, N''
--EXEC sp_scheduleInsert '2022-02-04 19:40', 4, N'ON-LINE', 17, 3, 1, N''

--3:
USE SQLAcademyVPU_011;
GO
--EXEC sp_scheduleInsert '2022-02-01 18:00', 8, N'ON-LINE', 26, 6, 7, N''
--EXEC sp_scheduleInsert '2022-02-01 19:40', 8, N'ON-LINE', 26, 6, 7, N''
--EXEC sp_scheduleInsert '2022-02-03 18:00', 7, N'ON-LINE', 26, 6, 7, N''
--EXEC sp_scheduleInsert '2022-02-03 19:40', 7, N'ON-LINE', 26, 6, 7, N''


--Output of the table:
SELECT 
		schedule_date_time				AS N'Date & Time',
		schedule_location				AS N'Location',
		group_name						AS N'Group',
		discipline_name					AS N'Discipline',
		teacher_last_name + N' ' +
		teacher_first_name + N' ' +
		teacher_patronim				AS N'Teacher',
		schedule_topic					AS N'Topic'

FROM dbo.groups gr, dbo.disciplines ds, dbo.teachers tch, dbo.schedules sch
WHERE schedule_id > 212
AND		schedule_discipline = discipline_id
AND		schedule_teacher = teacher_id
AND		schedule_group = group_id 
ORDER BY schedule_date_time;

--Unnessesary rows deletion
--DELETE FROM dbo.schedules
--WHERE schedule_id>200 AND schedule_id < 212 
--GO

